# Atlas4D Base - Default Values
# Override these in your own values file or via --set

# Global settings
global:
  imageRegistry: ""
  imagePullSecrets: []

# PostgreSQL with PostGIS + TimescaleDB + pgvector
postgres:
  enabled: true
  image:
    repository: atlas4d/postgres
    tag: "16-postgis-timescale-vector"
    pullPolicy: IfNotPresent
  replicas: 1
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "1000m"
  persistence:
    enabled: true
    size: 10Gi
    storageClass: ""
  auth:
    database: atlas4d
    username: atlas4d_app
    # Generate with: openssl rand -base64 32
    password: "changeme-in-production"
  service:
    type: ClusterIP
    port: 5432

# Redis for caching
redis:
  enabled: true
  image:
    repository: redis
    tag: "7-alpine"
    pullPolicy: IfNotPresent
  replicas: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  service:
    type: ClusterIP
    port: 6379

# API Gateway
gateway:
  enabled: true
  image:
    repository: atlas4d/api-gateway
    tag: "latest"
    pullPolicy: IfNotPresent
  replicas: 1
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  service:
    type: ClusterIP
    port: 8090
  env:
    DATABASE_URL: "postgresql://atlas4d_app:changeme-in-production@atlas4d-base-postgres:5432/atlas4d"
    REDIS_URL: "redis://atlas4d-base-redis:6379"

# Frontend
frontend:
  enabled: true
  image:
    repository: atlas4d/frontend
    tag: "latest"
    pullPolicy: IfNotPresent
  replicas: 1
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  service:
    type: LoadBalancer  # or NodePort for local dev
    port: 80
    nodePort: 30091  # Only used if type is NodePort

# Ingress (optional)
ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: atlas4d.local
      paths:
        - path: /
          pathType: Prefix
          service: frontend
        - path: /api
          pathType: Prefix
          service: gateway
  tls: []
